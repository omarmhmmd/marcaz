{
  "version": 3,
  "sources": ["../../../src/hooks/useMediaIndex.ts"],
  "sourcesContent": ["import {useEffect, useState} from 'react'\nimport {useTheme} from '../theme'\n\nfunction _getMediaQuery(media: number[], index: number) {\n  return index === 0\n    ? `(max-width: ${media[index] - 1}px)`\n    : `screen and (min-width: ${media[index - 1]}px) and (max-width: ${media[index] - 1}px)`\n}\n\n/**\n * This API might change. DO NOT USE IN PRODUCTION.\n * @beta\n */\nexport function useMediaIndex() {\n  const theme = useTheme()\n  const {media} = theme.sanity\n\n  // Get initial index\n  const [index, setIndex] = useState(() => {\n    if (typeof window !== 'undefined') {\n      for (let idx = 0; idx < media.length; idx += 1) {\n        const mq = window.matchMedia(_getMediaQuery(media, idx))\n\n        if (mq.matches) {\n          return idx\n        }\n      }\n    }\n\n    return 0\n  })\n\n  useEffect(() => {\n    const disposeFns = media.map((_, idx) => {\n      const mq = window.matchMedia(_getMediaQuery(media, idx))\n\n      const handleChange = () => {\n        if (mq.matches) setIndex(idx)\n      }\n\n      if (mq.addEventListener) {\n        mq.addEventListener('change', handleChange)\n      } else {\n        mq.addListener(handleChange)\n      }\n\n      return () => {\n        if (mq.removeEventListener) {\n          mq.removeEventListener('change', handleChange)\n        } else {\n          mq.removeListener(handleChange)\n        }\n      }\n    })\n\n    return () => {\n      disposeFns.forEach((disposeFn) => disposeFn())\n    }\n  }, [media])\n\n  return index\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkC;AAClC,mBAAuB;AAEvB,wBAAwB,OAAiB,OAAe;AACtD,SAAO,UAAU,IACb,eAAe,MAAM,SAAS,SAC9B,0BAA0B,MAAM,QAAQ,yBAAyB,MAAM,SAAS;AAAA;AAO/E,yBAAyB;AAC9B,QAAM,QAAQ;AACd,QAAM,CAAC,SAAS,MAAM;AAGtB,QAAM,CAAC,OAAO,YAAY,2BAAS,MAAM;AACvC,QAAI,OAAO,WAAW,aAAa;AACjC,eAAS,MAAM,GAAG,MAAM,MAAM,QAAQ,OAAO,GAAG;AAC9C,cAAM,KAAK,OAAO,WAAW,eAAe,OAAO;AAEnD,YAAI,GAAG,SAAS;AACd,iBAAO;AAAA;AAAA;AAAA;AAKb,WAAO;AAAA;AAGT,8BAAU,MAAM;AACd,UAAM,aAAa,MAAM,IAAI,CAAC,GAAG,QAAQ;AACvC,YAAM,KAAK,OAAO,WAAW,eAAe,OAAO;AAEnD,YAAM,eAAe,MAAM;AACzB,YAAI,GAAG;AAAS,mBAAS;AAAA;AAG3B,UAAI,GAAG,kBAAkB;AACvB,WAAG,iBAAiB,UAAU;AAAA,aACzB;AACL,WAAG,YAAY;AAAA;AAGjB,aAAO,MAAM;AACX,YAAI,GAAG,qBAAqB;AAC1B,aAAG,oBAAoB,UAAU;AAAA,eAC5B;AACL,aAAG,eAAe;AAAA;AAAA;AAAA;AAKxB,WAAO,MAAM;AACX,iBAAW,QAAQ,CAAC,cAAc;AAAA;AAAA,KAEnC,CAAC;AAEJ,SAAO;AAAA;",
  "names": []
}
